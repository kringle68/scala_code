<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Maps JavaScript API Example: Custom Icon</title>
    <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAzr2EBOXUKnm_jVnk0OJI7xSosDVG8KKPE1-m51RBrvYughuyMxQ-i1QfUnH94QxWIa6N4U6MouMmBA"
            type="text/javascript"></script>
    <script type="text/javascript">
    
	var polyPoint = new Array();
	var map;

	function initialize() {
      if (GBrowserIsCompatible()) {
        map = new GMap2(document.getElementById("map_canvas"));
        map.setCenter(new GLatLng(51.4816, 0.0361), 5);
        map.addControl(new GSmallMapControl());
        map.addControl(new GMapTypeControl());

        // Create a base icon for all of our markers that specifies the
        // shadow, icon dimensions, etc.
        var baseIcon = new GIcon(G_DEFAULT_ICON);
        baseIcon.shadow = "http://www.google.com/mapfiles/shadow50.png";
        baseIcon.iconSize = new GSize(20, 34);
        baseIcon.shadowSize = new GSize(37, 34);
        baseIcon.iconAnchor = new GPoint(9, 34);
        baseIcon.infoWindowAnchor = new GPoint(9, 2);

        // Creates a marker whose info window displays the letter corresponding
        // to the given index.
        function createMarker(point, index, info_window) {
          // Create a lettered icon for this point using our icon class
          var letter = String.fromCharCode("A".charCodeAt(0) + (index - 1));
          var letteredIcon = new GIcon(baseIcon);
          letteredIcon.image = "http://www.google.com/mapfiles/marker" + letter + ".png";

          // Set up our GMarkerOptions object
          markerOptions = { icon:letteredIcon };
          var marker = new GMarker(point, markerOptions);

          GEvent.addListener(marker, "click", function() {
            marker.openInfoWindowHtml(info_window);
          });
          return marker;
        }

        // Add markers to the map
		

	    var geocoder = new GClientGeocoder();

		markAddress(1, 'Lambeth, United Kingdom', '<span style="font: normal 11px Arial"><b>01/02/2009 11:16 am</b><br>Departing origin<br><i>Lambeth, United Kingdom</i></span>');
		markAddress(2, 'London-heathrow, United Kingdom', '<span style="font: normal 11px Arial"><b>01/02/2009 11:58 am</b><br>Transit through DHL facility<br><i>London-heathrow, United Kingdom</i></span>');
		markAddress(3, 'Paris, France', '<span style="font: normal 11px Arial"><b>02/02/2009 08:20 am</b><br>Transit through DHL facility<br><i>Paris, France</i></span>');
		markAddress(4, 'Leipzig, Germany', '<span style="font: normal 11px Arial"><b>02/02/2009 08:20 am</b><br>Transit through DHL facility<br><i>Leipzig, Germany</i></span>');		
		markAddress(5, 'Berlin, Germany', '<span style="font: normal 11px Arial"><b>02/02/2009 08:20 am</b><br>Shipment Delivered<br><i>Berlin, Germany</i></span>');


		function markAddress(index, address, msg) {
		  if (geocoder) {
			geocoder.getLatLng(
			  address,
			  function(point) {
				if (!point) {
				  alert(address + " not found");
				} else {
				  //if (polyPoint[index-1]){
				    //alert(lastPoint +' : '+ point);
					//var polyline = new GPolyline([polyPoint[index-1], point], "#ff0000", 3, 0.5);
					//map.addOverlay(polyline);
				  //}
				  polyPoint[index] = point;
				  map.addOverlay(createMarker(point, index, msg));
				}
			  }
			);
		  }
		}
		
      }
    }

	function buildPolyLine() {
		if ( polyPoint[1] && polyPoint[2] && polyPoint[3] && polyPoint[4] && polyPoint[4] ){
			var polyline = new GPolyline(polyPoint, "#ff0000", 3, 0.5);
			map.addOverlay(polyline);
		}
		else {
			var t = setTimeout( "buildPolyLine()", 10);
		}
	}

	buildPolyLine();

    </script>
  </head>
  <body onload="initialize()" onunload="GUnload()">
    <div id="map_canvas" style="width: 600px; height: 600px"></div>
  </body>
</html>
