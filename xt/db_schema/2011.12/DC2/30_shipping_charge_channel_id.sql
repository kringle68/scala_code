

BEGIN;

-- Fill in missing information from the web site for shipping_charge.shannel_id



ALTER TABLE shipping_charge
    ADD COLUMN channel_id INTEGER NULL,
    ADD CONSTRAINT shipping_charge_channel_id_fkey FOREIGN KEY (channel_id)
            REFERENCES channel(id)
;



update shipping_charge
    set channel_id = (select id from channel where name = 'NET-A-PORTER.COM')
    where sku in (
        '',            -- Bogus Unknown shipping charge, assign to NAP as the least worst option
        '9000207-001', -- Unknown in the websites, might be a typo. Defaulting to NAP
        '9000208-001', -- Unknown in the websites, might be a typo. Defaulting to NAP
        '900010-001',
        '900011-001',
        '900012-001',
        '900013-001',
        '900014-001',
        '900015-001',
        '900016-001',
        '900018-002',
        '900021-002',
        '900024-002',
        '900025-002',
        '900026-001',
        '900027-001',
        '900028-001',
        '900029-001',
        '900030-001',
        '900031-001',
        '900032-001',
        '900033-001',
        '900034-001',
        '900035-001',
        '900036-001',
        '900037-002',
        '900038-001',
        '900039-002',
        '900040-001',
        '900041-002',
        '900042-001',
        '900043-002',
        '900044-001',
        '900045-002',
        '900046-001',
        '900047-002',
        '900048-001',
        '900049-002',
        '900050-001',
        '900051-002',
        '900052-001',
        '900053-002',
        '900054-001',
        '900055-002',
        '900056-001',
        '900057-002',
        '900058-001',
        '900059-002',
        '900060-001',
        '900061-002',
        '900062-001',
        '900063-002',
        '900064-001',
        '900065-002',
        '900066-001',
        '900067-002',
        '900068-001',
        '900069-002',
        '900070-001',
        '900071-002',
        '900072-001',
        '900073-002',
        '900074-001',
        '900075-002',
        '900076-001',
        '900077-002',
        '900078-001',
        '900079-002',
        '900080-001',
        '900081-002',
        '900082-001',
        '900083-002',
        '900084-001',
        '900085-002',
        '900086-001',
        '900087-002',
        '900088-001',
        '900089-002',
        '900090-001',
        '900091-002',
        '900092-001',
        '900093-002',
        '900094-001',
        '900095-002',
        '900096-001',
        '900097-002',
        '900098-001',
        '900099-002',
        '9000100-001',
        '9000101-002',
        '9000102-001',
        '9000103-002',
        '9000104-001',
        '9000105-002',
        '9000106-001',
        '9000107-002',
        '9000108-001',
        '9000109-002',
        '9000110-001',
        '9000111-002',
        '9000112-001',
        '9000113-002',
        '9000114-001',
        '9000115-002',
        '9000116-001',
        '9000117-002',
        '9000118-001',
        '9000130-001',
        '9000131-001',
        '9000132-002',
        '9000133-002',
        '9000134-002',
        '9000135-002',
        '9000136-002',
        '9000137-002',
        '9000138-002',
        '9000139-002',
        '9000140-002',
        '9000141-002',
        '9000203-001',
        '9000204-001',
        '9000205-001',
        '9000206-001'
         )
;



update shipping_charge
    set channel_id = (select id from channel where name = 'MRPORTER.COM')
    where sku in (
        '910012-001',
        '910013-001',
        '910014-001',
        '910025-001',
        '910026-001',
        '910027-001',
        '910028-001',
        '910029-001',
        '910030-001',
        '910031-001',
        '910032-001',
        '910033-001',
        '910034-001',
        '910035-001',
        '910036-001',
        '910038-001',
        '910039-001',
        '910040-001',
        '910041-001',
        '910042-001',
        '910043-001',
        '910044-001',
        '910045-001',
        '910046-001',
        '910047-001',
        '910048-001',
        '910049-001',
        '910050-001',
        '910051-001',
        '910052-001',
        '910054-001',
        '910055-001',
        '910056-001',
        '910057-001',
        '910058-001',
        '910059-001',
        '910060-001',
        '910061-001',
        '910062-001',
        '910063-001',
        '910064-001',
        '910065-001',
        '910066-001',
        '910067-001',
        '910068-001',
        '910069-001',
        '910070-001',
        '910071-001',
        '910072-001',
        '910074-001',
        '910076-001',
        '910077-001',
        '910078-001',
        '910079-001',
        '910080-001',
        '910081-001',
        '910082-001',
        '910083-001',
        '910084-001',
        '910085-001',
        '910086-001',
        '910087-001',
        '910088-001',
        '910089-001',
        '910090-001',
        '910091-001',
        '910092-001',
        '910093-001',
        '910094-001',
        '910095-001',
        '910096-001',
        '910097-001',
        '910098-001',
        '910099-001',
        '9010100-001',
        '9010101-001',
        '9010102-001',
        '9010103-001',
        '9010104-001',
        '9010105-001',
        '9010106-001',
        '9010107-001',
        '9010108-001',
        '9010109-001',
        '9010110-001',
        '9010111-001',
        '9010112-001',
        '9010113-001',
        '9010114-001',
        '9010115-001',
        '9010116-001',
        '9010117-001',
        '9010132-001',
        '9010133-001',
        '9010134-001',
        '9010135-001',
        '9010136-001',
        '9010137-001',
        '9010138-001',
        '9010139-001',
        '9010140-001',
        '9010141-001',
        '9010203-001',
        '9010205-001',
        '9010206-001',
        '9010207-001',
        '9010208-001'
        )
;



update shipping_charge
    set channel_id = (select id from channel where name = 'theOutnet.com')
    where sku in (
        '904000-001',
        '904001-001',
        '904002-001',
        '904003-001',
        '904004-001',
        '9000203-001'
        )
;



update shipping_charge
    set channel_id = (select id from channel where name = 'JIMMYCHOO.COM')
    where sku in (
        'testing',              -- Unknonwn in the web site, guessing this is JC
        'usground',
        'usexpress',
        'usnypremier',
        'uscanadashipping',
        'usamericasshipping',
        'usrowshipping'
        )
;



ALTER TABLE shipping_charge
    ALTER COLUMN channel_id SET NOT NULL;



COMMIT;
