===============================
XT 2.19 Deployment Instructions
===============================

Release Date:       2010/08/17

These instructions are meant to be used in conjuction with those detailed in confluence:
    http://confluence.net-a-porter.com/display/DEV/DAVE-XTDC+Deployment

2.20.05: Point Release
2.20.04: Point Release
2.20.03: Point Release
2.20.02: Point Release
2.20.01: Point Release
2.20.00: Initial Release

1. AMQ daemon

These steps have been automated in the RPM deployment.
I'm still leaving the notes in case something goes wrong and we might need to rewvert to them

   *** NEW AMQ CONSUMER SERVER *** (same script as before but using new code)
  BEFORE DEPLOY
    A) Make sure the existing conusmer server is stopped.
  AFTER DEPLOY
    B) Start up the new consumer server in the same way as the old:
          /opt/xt/deploy/xtracker/script/xt_activemq_dc_daemon.pl start
          (making sure you use the correct perl: '/opt/xt/xt-perl/bin/perl')
    C) Check the consumer server is running:
          /opt/xt/deploy/xtracker/script/xt_activemq_dc_daemon.pl status
    D) If you need to stop the new server then use:
          /opt/xt/deploy/xtracker/script/xt_activemq_dc_daemon.pl stop
    E) Change the cronjob that runs every hour to stop and start the consumer server
       to use the new parameters to stop and then start it.

2. Crontab entry's

- Please change the following root crontab 
0 6 * * * /opt/xt/script/consistency_reports/visibility.pl > /dev/null 2>&1

to
0 6 * * * /opt/xt/deploy/xtracker/script/visibility.pl > /dev/null 2>&1

- Get rid of these lines. These scripts have been deprecated.
/opt/xt/script/dc2_sync/sync_measurements.sh
/opt/xt/script/dc1_sync/import_measurements.pl

# REL-278 (following on from TO-11329 RES-071 Expire Store Credits on XTracker 5pm on 1st of every month
# (LA 040610)
0 17 1 * * /opt/xt/deploy/xtracker/script/BAU/Expire_store_credits.pl > /dev/null 2>&1


3. Please manually restart script/housekeeping/orders/scanner_reader.pl


*** IMPORTANT ***

Please remember to apply DB patches for both DCs, but we shouldn't need to do that has the RPM does it for you.

X. Lastly
---------

Paste any console output from the steps above as a

  {noformat}
    [replace with console output]
  {noformat}

comment to the JIRA ticket for this release.


 _____________________________________
/ You do remember this is a DAVE      \
\ sponsored release, right?           /
 -------------------------------------
        \   ^__^
         \  (OO)\_______
            (__)\       )\/\
             U  ||----w |
                ||     ||


